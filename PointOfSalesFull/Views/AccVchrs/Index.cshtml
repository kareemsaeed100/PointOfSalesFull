
<br /><br />

<div class="panel panel-default">
    @*عرض الفواتير*@
    <div class="panel-heading">
        <div class="row">
            <h2 align="center" class="panel-title ">
                <strong style="text-align:center;color:red;font:bolder">سندات تسديد الموردين</strong>
            </h2>

            <button style="margin-right:10px" class="btn btn-primary pull-right" onclick="addNewOrder()">ْْانشاء سند</button>


            <div style="align-content:center">
                <input style="align-content:center" type="text" id="myInput" class="form-control" onkeyup="Search()" placeholder="ابحث برقم السند..">
                @*<button style="margin-right:10px" class="btn btn-primary pull-right" onclick="Search()">ْْبحث</button>*@
            </div>


        </div>
        @*show max invoice*@
        <div id="showmax" style="display:none" class="panel-body">
            <table class="table table-striped table-responsive">
                <tbody>
                    <tr id="invoichead"></tr>
                    <tr>
                        <td colspan="5">
                            <table class="table table-bordered">
                                <tbody id="invoicDetailes"></tbody>
                            </table>
                            <div id="totalbody"> </div>

                        </td>
                    </tr>
                </tbody>
            </table>
        </div>



    </div>

    @*انشاء فاتورة جديدة*@
 
    <div class="modal fade" id="newOrderModal">
        <div class="modal-dialog modal-lg" style=" width 900px !important;">
            <div class="modal-content">
                <div class="modal-header">
                    <a href="#" class="close" data-dismiss="modal">&times;</a>
                    <h4 style="color:red; font:bold" align="center">أضافة سند جديد</h4>
                </div>
                <form id="NewOrderForm">
                    <div class="modal-body">
                        <div class="form-horizontal">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label col-md-4">
                                        تاريخ السند
                                    </label>
                                    <div class="col-md-6">

                                        <input dir="ltr" placeholder="اختر التاريخ" name="vch_DatG" type="date" id="date-picker-example" class="form-control ">

                                    </div>

                                </div>
                            </div>
                            <hr />
                            <div class="col-md-6">
                                @*<h4 style="color:#ff6347"><b>البائع</b> </h4>*@
                                <input type="hidden" id="Saller_ID" />
                                <div class="form-group">
                                    <label class="control-label col-md-4">
                                        اسم الفرع
                                    </label>
                                    <div class="col-md-6">

                                        @Html.DropDownList("vch_Brn", null, "اختر اسم الفرع", htmlAttributes: new { @id = "BranchName", @name = "vch_Brn", @class = "DropDown col-md-12" })

                                    </div>

                                </div>
                            </div>
                            <hr />
                            <div class="col-md-6">
                                @*<h4 style="color:#ff6347"><b>البائع</b> </h4>*@
                                <input type="hidden" id="Saller_ID" />
                                <div class="form-group">
                                    <label class="control-label col-md-4">
                                        اسم المورد
                                    </label>
                                    <div class="col-md-6">
                                        @Html.DropDownList("Vch_SubNum", null, "اختر اسم المورد", htmlAttributes: new { @id = "SubNum", @name = "Vch_SubNum", @class = "DropDown col-md-12" })

                                    </div>

                                </div>
                            </div>
                            <hr />
                            <div class="col-md-6">
                                @*<h4 style="color:#ff6347"><b>الفرع</b> </h4>*@
                                <input type="hidden" id="Branch_ID" />
                                <div class="form-group">
                                    <label class="control-label col-md-4">
                                        رقم الفاتورة 
                                    </label>
                                    <div class="col-md-6">
                                       <select id="PureInvoice" name="Vch_PurNum" class="DropDown col-md-12">
                                            <option value="">اختر رقم الفاتورة</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <hr />
                            <div class="col-md-12">
                                <input type="hidden" id="Branch_ID" />
                                <div class="form-group">
                                    <label style="color:red" class="control-label col-md-4">
                                        المطلوب سداده
                                    </label>
                                    <div class="col-md-6">
                                        <input style="color:red" type="number" id="wantedVal" value="0" name="vch_Wanted" placeholder="0" class="form-control" />
                                    </div>
                                </div>
                            </div>
                            <hr />
                            @*payment Details*@
                            <div class="col-md-6">
                                @*<h4 style="color:#ff6347"><b>اسلوب الدفع</b> </h4>*@
                                <input type="hidden" id="Pay_ID1" />
                                <div class="form-group">
                                    <label class="control-label col-md-4">
                                        اسلوب الدفع1
                                    </label>
                                    <div class="col-md-6">

                                        @Html.DropDownList("vch_paymod1", null, "اختر اسلوب الدفع", htmlAttributes: new { @name = "vch_paymod1", @id = "paymod1", @class = "DropDown col-md-12 " })
                                        القيمة
                                        <input type="number" id="paid1" value="0" name="vch_Paid1" placeholder="0" class="form-control" />
                                    </div>
                                </div>
                            </div>
                            <hr />
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label col-md-4">
                                        اسلوب الدفع2
                                    </label>
                                    <div class="col-md-6">
                                        @Html.DropDownList("vch_paymod2", null, "اختر اسلوب الدفع", htmlAttributes: new { @name = "vch_paymod2", @id = "paymod2", @class = "DropDown col-md-12 " })
                                        القيمة
                                        <input type="number" id="paid2" value="0" name="vch_Paid2" placeholder="0" class="form-control" />
                                    </div>
                                </div>
                            </div>
                            <hr />
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label col-md-4">
                                        رقم الكارد
                                    </label>
                                    <div class="col-md-6">
                                        <input type="number" id="vch_cardnum" value="0" name="vch_cardnum" placeholder="0" class="form-control" />

                                    </div>

                                </div>
                            </div>

                            <hr />
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label col-md-4">
                                        المتبقى
                                    </label>
                                    <div class="col-md-6">
                                        <input type="number" id="Remind" value="0" name="vch_Remind" placeholder="0" class="form-control" />

                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                       
                        <button type="reset" class="btn btn-default" data-dismiss="modal">خروج</button>
                        <button id="SaveAccVchr" type="submit" class="btn btn-danger">حفظ</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    @*حذف الفاتورة*@
    <div class="modal fade" id="DeleteConfirmationInvoic">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <a href="#" class="close" data-dismiss="modal">&times;</a>
                    <h4>حذف  السند</h4>
                </div>
                <div class="modal-body">
                    <h4>هل انت متأكد من حذف السند.</h4>
                </div>
                <div class="modal-footer">
                    <a href="#" class="btn btn-primary" data-dismiss="modal" id="r">الغاء</a>
                    <a href="#" class="btn btn-danger" onclick="ConfirmDeleteInvoice()">تأكيد</a>
                </div>
            </div>
        </div>
    </div>
    @*تعديل السند*@
    <div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                    <h4 class="modal-title custom_align" id="Heading">تعديل السند</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="control-label col-md-4">
                          رقم السند
                        </label>
                        <input type="text" id="vch_numEdit" name="vch_num" readonly placeholder="Product Name" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-4">
                            رقم الفاتورة
                        </label>
                        <input type="text" id="Vch_PurNumEdit" name="Vch_PurNum" readonly placeholder="Product Name" class="form-control" />
                    </div>
                    <div hidden class="form-group">
                        <input id="vch_WantedEdit" hidden name="vch_Wanted" class="form-control" />


                    </div>
                    <div class="form-group">

                        <label class="control-label col-md-4">
                            اسم الفرع
                        </label>
                        <input type="text" id="vch_BrnNameEdit" name="vch_BrnName" readonly placeholder="Product Name" class="form-control" />
                    </div>
                    <div class="form-group">
                            <label class="control-label col-md-4">
                              تاريخ السند
                            </label>
                            <input type="text" id="vch_DatGEdit" name="vch_DatG"  placeholder="Product Name" class="form-control datepicker" />
                        </div>
                    <div id="way1" hidden class="form-group">
                            <label class="control-label col-md-4">
                                اسلوب الدفع 1
                            </label>
                            @Html.DropDownList("vch_paymod1", null, "اختر اسلوب الدفع", htmlAttributes: new { @name = "vch_paymod1Name", @id = "vch_paymod1NameEdit", @class = "DropDown col-md-12 " })
                            @*<input type="text" id="vch_paymod1Name" name="vch_paymod1Name" readonly placeholder="Product Name" class="form-control" />*@
                        </div>
                    <div id="paid1val"  hidden class="form-group">
                            <label class="control-label col-md-4">
                                القيمة
                            </label>
                            <input type="number" id="vch_Paid1Edit" name="vch_Paid1" placeholder="0"  class="form-control" />
                        </div>
                        <div id="way2" hidden class="form-group">
                            <input type="hidden" id="vch_paymod2" name="vch_paymod2"   class="form-control" />
                            <label class="control-label col-md-4">
                                اسلوب الدفع2
                            </label>
                            @Html.DropDownList("vch_paymod2", null, "اختر اسلوب الدفع", htmlAttributes: new { @name = "vch_paymod2Name", @id = "vch_paymod2NameEdit", @class = "DropDown col-md-12 " })
                            @*<input type="text" id="vch_paymod2Name" name="vch_paymod2Name" placeholder="0" class="form-control" />*@
                        </div>
                        <div id="paid2val" hidden class="form-group">
                            <label class="control-label col-md-4">
                                القيمة
                            </label>
                            <input type="number" id="vch_Paid2Edit"  name="vch_Paid2" class="form-control" />
                        </div>
                    <div id="cardval"  class="form-group">
                        <label class="control-label col-md-4">
                           رقم الكارد
                        </label>
                        <input type="number" id="vch_cardnumEdit"  name="vch_cardnum" placeholder="0" class="form-control" />
                    </div>
                    </div>
                <div class="modal-footer ">
                    <button type="button" onclick="SaveUpdateAccVchr()" class="btn btn-warning btn-lg" style="width: 100%;"><span class="glyphicon glyphicon-ok-sign"></span> حفظ</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    <div id="empity" class="panel-body">
        <h3 style="color:red;">فارغ!</h3>
    </div>

</div>
@section scripts{
    @*<script src="~/Scripts/jquery-1.10.2.js"></script>
        <script src="~/Scripts/jquery-1.10.2.min.js"></script>*@
    <script>

        getmax1();
        getmax2();
        function Search()
        {
            getmax1();
            getmax2();
            //}
            //    //$("#showmax").show();

        }

        var o_d_k;
        var Vch_Number;
        // deleteAccVchr
        function DeleteAccVchr(vch_num) {
            Vch_Number = vch_num;
            $("#DeleteConfirmationInvoic").modal("show");


        }
        var ConfirmDeleteInvoice = function () {
            var V_num = Vch_Number;
            $.ajax({
                url: "/AccVchrs/DeleteAccVchr?vch_num=" + V_num,
                type: "post",
                datatype: JSON,
                success: function (data) {
                    if (data.StatUs == 1) {
                        $("#DeleteConfirmationInvoic").modal("hide");
                        location.reload();
                    }
                    else
                        alert("لم تتم عملية الحذف");
                },
                error: function (data) {
                    alert(text(data.Message));
                }
            });


        }
        //delete product
        function DeleteProduct(Order_Det_Key) {
            o_d_k = Order_Det_Key;
            $("#DeleteConfirmation").modal("show");

        }
        var ConfirmDelete = function () {
            var Order_Det_Key = o_d_k;
            $.ajax({
                url: "/SalesInvoices/DeleteProduct?Order_Det_Key=" + Order_Det_Key,
                type: "post",
                datatype: JSON,
                success: function (data) {
                    if (data.StatUs == 1) {
                        $("#DeleteConfirmation").modal("hide");
                        location.reload();
                    }
                    else
                        alert("لم تتم عملية الحذف");
                },
                error: function (data) {
                    alert(text(data.Message));
                }
            });


        }

        //UpdateProduct
        function UpdateProduct(Order_Det_Key) {

            $.ajax({
                url: "/SalesInvoices/UpdateProduct?Order_Det_Key=" + Order_Det_Key,
                type: "post",
                datatype: JSON,
                success: function (data) {
                    if (data.StatUs == 1) {
                        alert("تمت عملية التعديل بنجاح");
                        location.reload();
                    }
                    else
                        alert("لم تتم عملية التعديل");
                },
                error: function (data) {
                    alert(text(data.Message));
                }
            });
        }

        function EditAccVchr(Vch_num) {
            $.ajax({
                url: "/AccVchrs/GetAccVchrByID?Vch_num=" + Vch_num,
                type: "Get",
                format: "Json",
                success: function (data) {
                    if (data.vch_paymod1Name != null)
                    {
                        $("#way1").show();
                        //$("#vch_paymod1Nameoption:selected").text(data.vch_paymod1Name);

                    }
                    if (data.vch_paymod2Name != null) {
                        $("#way2").show();
                        //$("#vch_paymod2Name option:selected").text(data.vch_paymod2Name);

                    }
                    if (data.vch_Paid1 >0) {
                        $("#paid1val").show();
                        $("#vch_Paid1Edit").val(data.vch_Paid1);

                    }
                    if (data.vch_Paid2 >0) {
                        $("#paid2val").show();
                        $("#vch_Paid2Edit").val(data.vch_Paid2);

                    }
                    $("#vch_cardnumEdit").val(data.vch_cardnum);
                    $("#Vch_PurNumEdit").val(data.Vch_PurNum);
                    $("#vch_BrnNameEdit").val(data.vch_BrnName);
                    $("#vch_numEdit").val(data.vch_num);
                    $("#vch_WantedEdit").val(data.vch_Wanted);
                    $("#vch_DatGEdit").val(data.vch_DatG);


                },
                error: function () {
                    alert("error");
                }

            });
        }

        function SaveUpdateAccVchr() {
            var paid1 =parseFloat($("#vch_Paid1Edit").val());
            var paid2 = parseFloat($("#vch_Paid2Edit").val());
            var wantedVal = parseFloat($("#vch_WantedEdit").val());

            if ($("#vch_Paid1Edit").val() == "") {
                paid1 = 0.0;
            }
            if ($("#vch_Paid2Edit").val() == "") {
                paid2 = 0.0;
            }
            alert(paid2);
            if (parseFloat(paid1 + paid2) > parseFloat(wantedVal)) {
                alert("قيمة المدفوع اكبر من المطلوب");
                return;
            }

            var vch_Num = $("#vch_numEdit").val();
            var vch_DatG = $("#vch_DatGEdit").val();
            var vch_paymod1 = $("#vch_paymod1NameEdit").val();
            var vch_paymod2 = $("#vch_paymod2NameEdit").val();
            var vch_cardnum = $("#vch_cardnumEdit").val();
            var vch_Paid1 = paid1;
            var vch_Paid2 = paid2;
            if (paid2==0)
            {
                vch_paymod2 = 1;
            }
            if (paid1 == 0) {
                vch_paymod1 = 1;
            }

            var data = { vch_Num: vch_Num, vch_DatG: vch_DatG, vch_paymod1: vch_paymod1, vch_paymod2: vch_paymod2, vch_cardnum: vch_cardnum, vch_Paid1: vch_Paid1, vch_Paid2: vch_Paid2 }
            $.ajax({
                url: "/AccVchrs/SaveUpdateAccVchr",
                type: "post",
                datatype: JSON,
                data: data,
                success: function (data) {
                    if (data.StatUs == 1) {
                        alert(data.Message);
                        location.reload();
                    }
                    else
                        alert(data.Message);
                },
                error: function (data) {
                    alert(data.Message);
                }


            });

        }


        //get max invoice

        function getmax1() {
            var Vch_num = $("#myInput").val();

            if (Vch_num > 0) {
                // location.reload();
                $.get("/AccVchrs/GetAccVchrSearch?Vch_num=" + Vch_num, null, DataBind)
                $("#invoichead").empty();
            }
            else
            {
                $.get("/AccVchrs/GetAccVchr", null, DataBind);
                $("#invoichead").empty();
            }
            function DataBind(OrderList1) {
                var indexBody = $("#invoichead");
                if (OrderList1.length > 0)
                {

                    for (var i = 0; i < OrderList1.length; i++) {
                        var Data = "<td>اسم المورد :" + OrderList1[i].vch_subName + "</td>" +
                                   "<td id='invoicenum'>رقم الفاتورة :" + OrderList1[i].Vch_PurNum + "</td>" +
                                   "<td id='invoicenum'>رقم السند :" + OrderList1[i].vch_num + "</td>" +
                                   "<td id='invoicenum'>اسم الفرع :" + OrderList1[i].vch_BrnName + "</td>" +
                                   "<td>تاريخ السند :" + OrderList1[i].vch_DatG + "</td>";
                        indexBody.append(Data);

                    }
                    $("#showmax").show();
                    $("#empity").hide();
                }
                else
                    $("#empity").show();

            }
        }
        function getmax2() {
            var totalBill = 0.0;
            var totalbody = $("#totalbody");
            var order_Id;

            var Vch_num = $("#myInput").val();
            if (Vch_num > null) {
                $.get("/AccVchrs/GetAccVchrSearch?Vch_num=" + Vch_num, null, DataBind2)
                $("#invoicDetailes").empty();
                $("#totalbody").empty();
            }
            else
            {
                $.get("/AccVchrs/GetAccVchr", null, DataBind2)
                $("#invoicDetailes").empty();
                $("#totalbody").empty();
                //$("#totalbody").append("<button onclick='GetNext()' class='btn btn-primary pull-right' style='margin-right:100px;'> <strong>الفاتورة التالية</strong></button>" +
                //                  "<button onclick='GetPrefex()' class='btn btn-primary pull-right' style='margin-right:100px;'> <strong>الفاتورة السابقة</strong></button>");

            }
            function DataBind2(OrderList2) {
                var indexBody = $("#invoicDetailes");
                var vch_num = 0;
                if (OrderList2.length > 0) {
                    indexBody.append("<tr><th>اسلوب الدفع 1</th><th>القيمة</th><th>اسلوب الدفع 2</th><th>القيمة</th><th>رقم الكارد</th><th>اجمالى المدفوع</th><th>المتبقى</th><th>تعديل</th><th>حذف</th></tr>");
                    for (var i = 0; i < OrderList2.length; i++) {
                        vch_num = OrderList2[i].vch_num;
                        totalBill = totalBill + (OrderList2[i].vch_Paid1 + OrderList2[i].vch_Paid2);
                        var Data = "<tr><td>" + OrderList2[i].vch_paymod1Name + "</td>" +
                                       "<td>" + OrderList2[i].vch_Paid1 + "</td>" +
                                       "<td>" + OrderList2[i].vch_paymod2Name + "</td>" +
                                       "<td>" + OrderList2[i].vch_Paid2 + "</td>" +
                                       "<td>" + OrderList2[i].vch_cardnum + "</td>" +
                                       "<td>" + (OrderList2[i].vch_Paid1 + OrderList2[i].vch_Paid2) + "</td>" +
                                       "<td>" + OrderList2[i].vch_Remind + "</td>"+
                                       "<td><p data-placement='top' data-toggle='tooltip' title='تعديل'><button onclick='EditAccVchr(" + OrderList2[i].vch_num + ")' class='btn btn-primary btn-xs' data-title='Edit' data-toggle='modal' data-target='#edit'><span class='glyphicon glyphicon-pencil'></span></button></p></td>" +
                                       "<td><p data-placement='top' data-toggle='tooltip' title='حذف'><button onclick='DeleteAccVchr(" + OrderList2[i].vch_num + ")' class='btn btn-danger btn-xs' data-title='Delete' data-toggle='modal' data-target='#delete'><span class='glyphicon glyphicon-trash'></span></button></p></td></tr>";
                        indexBody.append(Data);


                    }
                    totalbody.append("<span class='pull-right' style='margin-right:100px;'><strong>اجمالى المدفوع :  </strong> " + totalBill + "</span>" +
                                  "<button onclick='DeleteAccVchr(" + vch_num + ")' class='pull-right btn btn-danger pull-right' style='margin-right:100px;'> <strong>حذف   السند   </strong></button>" +
                                                                         "<a id='reportpdf' href='#' onclick='Exatractreport()' class='report'title='تحميل'  href=''></a>" +
                                      "<a id='reportexel' class='report' href='#' title='تحميل' onclick='Exatractreport(Excel)'></a>" +

                                       "<a id='reportWord' class='report' href='#' title='تحميل' onclick='Exatractreport(Word)'></a>" +

                                       "<a id='reportImage'  class='report' href='#' title='تحميل' onclick='Exatractreport(Image)'></a>");
                }
            }
        }

        var x;
        //Show Modal.
        function addNewOrder() {
            //$("#name").val("اختر اسم العميل");
            $("#Email").val("");
            $("#newOrderModal").modal();
        }
        //After Add A New Order In The List, Clear Clean The Form For Add More Order.
        function clearItem() {
            $("#productName").val("اختر اسم الصنف");
            $("#price").val(0);
            $("#quintity").val(0);
            $("#amount").val(0);
            $("#discount").val(0);
            $("#tax").val(0);
            $("#total").val(0);
        }
        //After Click Save Button Pass All Data View To Controller For Save Database
        function SaveAccVchr(data) {
            return $.ajax({
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                type: 'POST',
                url: "/AccVchrs/SaveAccVchr",
                data: data,
                success: function (result) {
                    alert(result);
                    location.reload();
                },
                error: function () {
                    alert("Error!")
                }
            });
        }
        //Collect Multiple Order List For Pass To Controller
        $("#SaveAccVchr").click(function (e) {
            e.preventDefault();
            var TotalPaid = 0;
            var pay1Val = 0;
            var pay2Val = 0;
            if ($("#paid1").val() == "") {
                pay1Val = 0;
            }
            else {
                pay1Val = parseFloat($("#paid1").val());
            }
            if ($("#paid2").val() == "") {
                pay2Val = 0;
            }
            else {
                pay2Val = parseFloat($("#paid2").val());
            }
            var data = JSON.stringify({
                vch_Brn: $("#BranchName").val(),
                vch_DatG: $("#date-picker-example").val(),
                vch_paymod1: $("#paymod1").val(),
                vch_paymod2: $("#paymod1").val(),
                Vch_PurNum:$("#PureInvoice").val(),
                Vch_SubNum:$("#SubNum").val(),
                vch_cardnum:$("#vch_cardnum").val(),
                vch_Paid1: pay1Val,
                vch_Paid2:pay2Val,
                vch_Wanted:$("#wantedVal").val(),
                vch_Remind:$("#Remind").val()
            });

            $.when(SaveAccVchr(data)).then(function (response) {
                console.log(response);
            }).fail(function (err) {
                console.log(err);
            });
        });

        $("#SubNum").change(function () {

            var subid = (parseInt)($("#SubNum").val());
            GetPurelist(subid);
        });
        $("#PureInvoice").on("change", function () {
            //Getting Value
            var Pur_Id = $("#PureInvoice").val();
            //Setting Value
            GetPureValue(Pur_Id);
        });
        var Remind = 0.0;
        $("#wantedVal,#paid1,#paid2").keyup(function () {

            var paid1 = $("#paid1").val();
            var paid2 = $("#paid2").val();
            var wantedVal = $("#wantedVal").val();
            if (paid1 == "") {
                paid1 = 0.0;
            }
            if (paid2 == "") {
                paid2 = 0.0;
            }
            if (wantedVal == "") {
                wantedVal = 0.0;
            }
            Remind = wantedVal - (paid1 + paid2);

        });
        $("#paid1,#paid2").keyup(function () {

            var paid1 = $("#paid1").val();
            var paid2 = $("#paid2").val();
            var wantedVal = $("#wantedVal").val();
            if (paid1 == "") {
                paid1 = 0.0;
            }
            if (paid2 == "") {
                paid2 = 0.0;
            }
            if (wantedVal == "") {
                wantedVal = 0.0;
            }
            $("#Remind").val("0");
            Remind = wantedVal - (paid1 + paid2);
            $("#Remind").val(Remind);
        });
        function GetPurelist(Sub_ID) {
            var totalBill = 0.0;
            var PureInvoice = $("#PureInvoice");
            $.get("/AccVchrs/GetPurelist?Sub_ID=" + Sub_ID, null, DataBind2)
            function DataBind2(OrderList2) {
                if (OrderList2.length > 0) {
                    for (var i = 0; i < OrderList2.length; i++) {
                        totalBill = totalBill + OrderList2[i].Total;
                        var Data = "<option value=" + OrderList2[i].Order_Id + ">" + OrderList2[i].Order_Id + "</option> ";
                        PureInvoice.append(Data);
                    }
                }
            }
        }
        function GetPureValue(Pur_Id) {
            var cr = 0.0;
            var dr = 0.0;
            $.get("/AccVchrs/GetPureValue?Pur_Id=" + Pur_Id, null, DataBind2)
            function DataBind2(OrderList2) {
                if (OrderList2.length > 0) {
                    for (var i = 0; i < OrderList2.length; i++) {
                        cr = cr + OrderList2[i].cr;
                        dr = dr + OrderList2[i].dr;
                    }
                    $("#wantedVal").val(cr - dr);
                }
            }
        }
        function Exatractreport(){
            var Vch = $("#myInput").val();
            if (Vch > 0){
                $.ajax({
                    type: 'POST',
                    url: '@Url.Action("ExportReportSearch", "AccVchrs")',
                    dataType: 'html',
                    data: ({
                        Vch_num: Vch 
                    })
                });
            }
            else {
                    $.ajax({
                        type: 'POST',
                        url: '@Url.Action("ExportReportMax", "AccVchrs")',
                        dataType: 'html'
                    });
            }


        }

        getDate();
        function getDate() {
            var today = new Date();

            document.getElementById("date-picker-example").value = today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2);

        }


    </script>


}